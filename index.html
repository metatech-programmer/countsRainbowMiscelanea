<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <link rel="stylesheet" href="./css/style.css" />
    <meta name="title" content="Merkatodo - Sistema de Autoservicio" />
    <meta name="description" content="Sistema de gestión de ventas y gastos para Merkatodo" />
    <meta property="og:title" content="Merkatodo - Sistema de Autoservicio" />
    <meta property="og:description" content="Sistema de gestión de ventas y gastos para Merkatodo" />
    <meta property="og:url" content="https://counts-miscelanea.vercel.app/" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="es_CO" />
    <meta name="author" content="Metatech" />

    <link rel="shortcut icon" href="./icon.png" type="image/png" />
    <script src="./js/indexedDB.js"></script>
    <title>Merkatodo - Sistema de Autoservicio</title>
  </head>

  <body>
    <nav id="nav">
      <a href="#nav" class="active">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
        Inicio
      </a>
      <a href="/counts.html">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
        Historial
      </a>
      <a href="/graphics.html">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
        Estadísticas
      </a>
    </nav>

    <h1 class="animated">Registro de Operaciones</h1>

    <div style="position: relative" class="animated">
      <button id="btnProx">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>
        Lista de pedidos
      </button>
      <div
        class="pedidoList"
        style="overflow-y: auto; overflow-x: hidden; display: none"
      >
        <button type="button" id="closeList">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
        <h2>Lista de Pedidos</h2>
        <form action="">
          <div>
            <input
              type="text"
              name="pedido"
              id="pedido"
              placeholder="Agregar producto al pedido..."
              required
            />
          </div>
          <input type="submit" value="Agregar" id="btnPedido" />
        </form>
        <div style="position: relative; display: flex; flex-direction: column; width: 100%;">
          <h3>Productos pendientes</h3>

          <div
            style="display: flex; width: 100%; justify-content: space-between; gap: 0.5rem; margin: 1rem 0;"
          >
            <button
              type="button"
              class="delete btn-sm"
              id="btnDelete"
            >
              Vaciar lista
            </button>
            <button type="button" class="btn-primary btn-sm" id="btnSendList">Enviar lista</button>
          </div>
          <hr
            style="width: 100%; margin: 0.5rem 0; border: none; border-top: 1px solid var(--border-color);"
          />
          <ul id="list"></ul>
        </div>
      </div>
      <form action="">
        <div>
          <label for="type">Tipo de operación</label>
          <div class="radio-group">
            <label class="radio-item venta">
              <input type="radio" name="type" id="venta" value="venta" checked />
              <span>Venta</span>
            </label>
            <label class="radio-item jer">
              <input type="radio" name="type" id="jer" value="jer" />
              <span>JER</span>
            </label>
            <label class="radio-item gastos">
              <input type="radio" name="type" id="gastos" value="gastos" />
              <span>Gasto</span>
            </label>
          </div>
        </div>
        <div>
          <label for="value">
            Monto
            <span style="color: var(--success); font-weight: 600;">
              $<span id="spanValue">0</span>
            </span>
          </label>
          <input
            type="number"
            name="value"
            id="value"
            required
            min="0"
            placeholder="Ingrese el valor"
            oninput="updateSpanValue();"
          />
        </div>
        <div>
          <label for="description">
            Método de pago
            <span class="label-hint">(opcional)</span>
          </label>
          <div class="payment-selector">
            <label class="payment-item">
              <input
                type="radio"
                name="digitalPago"
                id="nequi"
                value="nequi"
              />
              <img
                src="https://i.ibb.co/FqNfhtCH/nequi-logo-brandlogos-net-ldrer.png"
                alt="Nequi"
              />
            </label>
            <label class="payment-item">
              <input
                type="radio"
                name="digitalPago"
                id="daviplata"
                value="daviplata"
              />
              <img
                src="https://i.ibb.co/s9z8MDz4/Davi-Plata-1024x580.png"
                alt="Daviplata"
              />
            </label>
          </div>
        </div>
        <div>
          <label for="description">Descripción</label>
          <input
            type="text"
            name="description"
            id="description"
            placeholder="Detalle del producto o servicio"
            required
            list="opciones"
            autocomplete="off"
            autocapitalize="off"
            spellcheck="true"
          />
          <datalist id="opciones"> </datalist>
        </div>
        <input
          type="submit"
          value="Registrar operación"
          id="btnRegister"
        />
      </form>
    </div>
    
    <div class="countDay animated">
      <h2>Resumen del día</h2>
      <div id="messageResult">
        <div class="messageResultNoData hidden">
          No hay registros para mostrar.
        </div>
        <div class="messageResultData">
          <div>
            <h2>Ventas</h2>
            <p id="totalVenta">$0</p>
          </div>
          <div>
            <h2>JER</h2>
            <p id="totalJER">$0</p>
          </div>
          <div>
            <h2>Gastos</h2>
            <p id="totalGastos">$0</p>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="rows-per-page" style="justify-content:flex-end; display:flex; gap:8px; margin-bottom:12px;">
          <label for="historyRowsPerPage">Mostrar:</label>
          <select id="historyRowsPerPage" class="rows-select">
            <option value="10" selected>10</option>
            <option value="20">20</option>
            <option value="50">50</option>
            <option value="100">100</option>
            <option value="all">Todos</option>
          </select>
        </div>

        <table>
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Venta</th>
              <th>Descripción</th>
              <th>JER</th>
              <th>Desc. JER</th>
              <th>Gastos</th>
              <th>Desc. Gastos</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="counts"></tbody>
        </table>
        <!-- PAGINADOR (Inicio) -->
        <div class="pagination" id="historyPagination">
          <button class="pagination-btn" id="historyFirstPage" title="Primera página" aria-label="Ir a la primera página" data-action="first" disabled>
            <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="11 17 6 12 11 7"></polyline>
              <polyline points="18 17 13 12 18 7"></polyline>
            </svg>
            <span class="sr-only">Primera página</span>
          </button>
          <button class="pagination-btn" id="historyPrevPage" title="Página anterior" aria-label="Ir a la página anterior" data-action="prev" disabled>
            <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
            <span class="sr-only">Página anterior</span>
          </button>
          <div class="pagination-info" id="historyPaginationInfo">
            Página <span id="historyCurrentPage">1</span> de <span id="historyTotalPages">1</span>
          </div>
          <button class="pagination-btn" id="historyNextPage" title="Siguiente página" aria-label="Ir a la siguiente página" data-action="next" disabled>
            <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
            <span class="sr-only">Siguiente página</span>
          </button>
          <button class="pagination-btn" id="historyLastPage" title="Última página" aria-label="Ir a la última página" data-action="last" disabled>
            <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="13 17 18 12 13 7"></polyline>
              <polyline points="6 17 11 12 6 7"></polyline>
            </svg>
            <span class="sr-only">Última página</span>
          </button>
        </div>
      </div>
    </div>
    <div class="countR animated">
      <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
      Registros: <span id="countRegistros">0</span>
    </div>


    <script src="./js/modal.js"></script>
    <script src="./js/app.js"></script>
    <script src="./js/appTable.js"></script>
  </body>
</html>
